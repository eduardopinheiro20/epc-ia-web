<!-- jogos.html -->
<div class="mt-10 text-center">
  <h1 class="text-3xl font-extrabold text-emerald-400">
    {{ activeTab === 'futuros' ? 'Próximos Jogos' : 'Jogos Encerrados' }}
  </h1>

  <p class="text-gray-300 mt-2">
    {{ activeTab === 'futuros'
      ? 'Lista de jogos que ainda irão acontecer. Filtre por time, liga ou data.'
      : 'Lista de jogos já finalizados. Filtre por time, liga ou data.' }}
  </p>
</div>

<div class="flex justify-center mt-6 gap-4">
  <button
    (click)="setTab('futuros')"
    class="px-6 py-2 rounded-lg border transition"
    [ngClass]="{
      'bg-emerald-600 border-emerald-600 text-white': activeTab === 'futuros',
      'bg-[#1e293b] border-gray-600 text-gray-200 hover:bg-[#273449]': activeTab !== 'futuros'
    }"
  >
    Próximos Jogos
  </button>

  <button
    (click)="setTab('encerrados')"
    class="px-6 py-2 rounded-lg border transition"
    [ngClass]="{
      'bg-emerald-600 border-emerald-600 text-white': activeTab === 'encerrados',
      'bg-[#1e293b] border-gray-600 text-gray-200 hover:bg-[#273449]': activeTab !== 'encerrados'
    }"
  >
    Jogos Encerrados
  </button>
</div>

<!-- FILTROS -->
<div class="w-full max-w-7xl mx-auto mt-6 px-4">
  <div class="bg-[#0f1a2b] p-4 rounded-xl border border-gray-700 flex flex-wrap gap-4 items-end">

    <div class="flex flex-col">
      <label class="text-gray-300 text-sm">Time (casa ou fora)</label>
      <input type="text" [(ngModel)]="qTeam" (ngModelChange)="applyFilters()"
             placeholder="Ex: Manchester" class="bg-[#142238] text-gray-200 p-2 rounded w-64" />
    </div>

    <div class="flex flex-col">
      <label class="text-gray-300 text-sm">Liga</label>
      <select [(ngModel)]="qLiga" (ngModelChange)="applyFilters()" class="bg-[#142238] text-gray-200 p-2 rounded">
        <option value="">Todas</option>
        <option *ngFor="let l of ligasList" [value]="l">{{ l }}</option>
      </select>
    </div>

    <div class="flex flex-col">
      <label class="text-gray-300 text-sm">Data início</label>
      <input type="date" [(ngModel)]="startDate" (ngModelChange)="applyFilters()"
             class="bg-[#142238] text-gray-200 p-2 rounded" />
    </div>

    <div class="flex flex-col">
      <label class="text-gray-300 text-sm">Data fim</label>
      <input type="date" [(ngModel)]="endDate" (ngModelChange)="applyFilters()"
             class="bg-[#142238] text-gray-200 p-2 rounded" />
    </div>

    <div class="ml-auto flex items-center gap-2">
      <button (click)="limparFiltros()" class="bg-[#21303d] text-gray-200 px-4 py-2 rounded border border-gray-700">
        Limpar
      </button>
      <button (click)="toggleDateSort()" class="bg-[#21303d] text-gray-200 px-3 py-2 rounded border border-gray-700">
        Ordem: {{ dateSort === 'asc' ? '▲' : '▼' }}
      </button>
    </div>
  </div>
</div>

<!-- TABELA / FUTUROS -->
<div class="max-w-7xl mx-auto mt-6 px-4" *ngIf="!loading">
  <div class="bg-[#0f1a2b] rounded-xl p-0 shadow-lg border border-gray-700 overflow-hidden">
    <table class="w-full text-gray-300">
      <thead class="bg-[#142238] text-emerald-400" *ngIf="activeTab === 'futuros'">
        <tr>
          <th class="py-3 px-4 text-center">Confronto</th>
          <th class="py-3 px-4 text-center">Liga</th>
          <th class="py-3 px-4 text-center cursor-pointer select-none" (click)="toggleDateSort()">Data</th>
          <th class="py-3 px-4 text-center">Ações</th>
        </tr>
      </thead>

      <tbody *ngIf="activeTab === 'futuros'">
        <tr *ngFor="let jogo of pageItemsFuturos" class="border-b border-gray-800 hover:bg-[#0b1a27]">
          <td class="py-3 px-4 font-semibold text-center text-gray-100">
            {{ jogo.home }} x {{ jogo.away }}
          </td>
          <td class="py-3 px-4 text-center">{{ jogo.league }}</td>
          <td class="py-3 px-4 text-center">
            {{ jogo._dateObj ? (jogo._dateObj | date:'dd/MM/yyyy HH:mm') : '-' }}
          </td>
          <td class="py-3 px-4 text-center">
            <!-- Aqui você pode inserir botões de ação (ex: abrir popup, gerar bilhete) -->
            -
          </td>
        </tr>

        <tr *ngIf="pageItemsFuturos.length === 0">
          <td class="py-6 px-4 text-center text-gray-400" colspan="4">Nenhum jogo encontrado.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- PAGINAÇÃO FUTUROS -->
  <div *ngIf="activeTab === 'futuros'" class="flex justify-center items-center gap-4 mt-6">
    <button (click)="anteriorFut()" [disabled]="page === 1"
            class="px-4 py-2 rounded-lg border border-gray-700 bg-[#0f1a2b] text-emerald-400 disabled:opacity-40">
      ← Anterior
    </button>

    <span class="text-gray-300">Página {{ page }} de {{ pages }}</span>

    <button (click)="proximaFut()" [disabled]="page === pages"
            class="px-4 py-2 rounded-lg border border-gray-700 bg-[#0f1a2b] text-emerald-400 disabled:opacity-40">
      Próxima →
    </button>
  </div>
</div>

<!-- TABELA / ENCERRADOS -->
<div class="max-w-7xl mx-auto mt-6 px-4" *ngIf="!loading && activeTab === 'encerrados'">
  <div class="bg-[#0f1a2b] rounded-xl p-0 shadow-lg border border-gray-700 overflow-hidden">
    <table class="w-full text-gray-300">
      <thead class="bg-[#142238] text-emerald-400">
        <tr>
          <th class="py-3 px-4 text-center">Confronto</th>
          <th class="py-3 px-4 text-center">Liga</th>
          <th class="py-3 px-4 text-center cursor-pointer select-none" (click)="toggleDateSort()">Data</th>
          <th class="py-3 px-4 text-center">Placar</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let jogo of encerrados" class="border-b border-gray-800 hover:bg-[#0b1a27]">
          <td class="py-3 px-4 font-semibold text-center text-gray-100">
            {{ jogo.home }} x {{ jogo.away }}
          </td>
          <td class="py-3 px-4 text-center">{{ jogo.league }}</td>
          <td class="py-3 px-4 text-center">
            {{ jogo.date ? (jogo.date | date:'dd/MM/yyyy HH:mm') : '-' }}
          </td>
          <td class="py-3 px-4 text-center font-bold">
            {{ jogo.home_goals }} - {{ jogo.away_goals }}
          </td>
        </tr>

        <tr *ngIf="encerrados.length === 0">
          <td class="py-6 px-4 text-center text-gray-400" colspan="4">Nenhum jogo encontrado.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- PAGINAÇÃO ENCERRADOS (BACKEND) -->
  <div class="flex justify-center items-center gap-4 mt-6">
    <button (click)="anteriorEnc()" [disabled]="encerradosPage === 1"
            class="px-4 py-2 rounded-lg border border-gray-700 bg-[#0f1a2b] text-emerald-400 disabled:opacity-40">
      ← Anterior
    </button>

    <span class="text-gray-300">Página {{ encerradosPage }} de {{ encerradosPages }}</span>

    <button (click)="proximaEnc()" [disabled]="encerradosPage === encerradosPages"
            class="px-4 py-2 rounded-lg border border-gray-700 bg-[#0f1a2b] text-emerald-400 disabled:opacity-40">
      Próxima →
    </button>
  </div>
</div>

<div *ngIf="loading" class="text-center text-gray-400 mt-8">Carregando jogos...</div>
